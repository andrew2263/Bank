"use strict";!function(){window.calculateCreditParams={calculateSumCredit:function(e,t,a){var r=0,n=0,c=document.getElementById("calculator-checkbox-casco"),o=document.getElementById("calculator-checkbox-lifesafe");switch(a){case"mortgage":r=e-t,document.getElementById("calculator-checkbox-mortgage").checked&&(r-=document.getElementById("calculator-checkbox-mortgage").dataset.sum),t/e<.15&&(n=9.4),t/e>=.15&&(n=8.5);break;case"car":r=e-t,c.checked||o.checked||(e<2e6&&(n=16),e>=2e6&&(n=15)),(c.checked&&!o.checked||!c.checked&&o.checked)&&(n=8.5),c.checked&&o.checked&&(n=3.5);break;case"consumer":r=e,e<75e4&&(n=15),e>=75e4&&e<2e6&&(n=12.5),e>=2e6&&(n=9.5),document.getElementById("calculator-checkbox-salary").checked&&(n-=.5);break;default:r=e}return{sumCredit:r,percentage:n}},calculatePayCredit:function(e,t,a){var r=e/100/12,n=12*a;return parseInt(t*(r+r/(Math.pow(1+r,n)-1)),10)},calculateSalary:function(e){return parseInt(e/.45,10)}}}(),function(){var e,t,a=document.querySelector(".calculator"),r=a.querySelector(".calculator__goal"),n=document.querySelector(".calculator__select"),c=a.querySelector(".calculator__list"),o=a.querySelector("#calculator-select"),l=a.querySelectorAll(".calculator__link"),i=a.querySelectorAll(".calculator__credit"),u=a.querySelectorAll(".calculator__price-button"),s=a.querySelectorAll(".calculator__initial-range"),d=a.querySelectorAll(".calculator__term-range"),m=a.querySelectorAll(".calculator__price_range"),p=a.querySelectorAll(".calculator__price_initial"),g=a.querySelectorAll(".calculator__price_term"),_=a.querySelector(".calculator__offer"),v=a.querySelector(".calculator__offer-request"),f=a.querySelector(".calculator__request"),y=a.querySelectorAll(".calculator__checkbox-group"),S=!1,q=a.querySelector("#calculator-form"),I=localStorage,L=[],h=[],b=[],N=[],w=[],k=[],C=[],E=function(e,t){for(var a=0;a<e.length;a++)for(var r=e[a].querySelectorAll("input"),n=0;n<r.length;n++)t.push(r[n]);return t};L=E(m,L),h=E(p,h),b=E(g,b),N=E(s,N),w=E(d,w),k=E(y,k);var O,H,B=(O=1,function(){return S?++O:O}),P=function(e){if(e.parentNode.parentNode.parentNode.parentNode.querySelector(".calculator__price_initial")){var t=e.parentNode.parentNode.parentNode.parentNode.querySelector(".calculator__price_initial").querySelector("input"),a=e.parentNode.parentNode.parentNode.parentNode.querySelector(".calculator__initial-range").querySelector("input").value;t.value=j(parseInt(Number(D(e.value))*Number(a/100)),10);var r=t.parentNode.querySelector(".calculator__price-currency");J(parseInt(D(t.value),10),r,"roubles")}},T=function(a){var r=parseInt(a.value,10);(r<parseInt(a.dataset.min,10)||r>parseInt(a.dataset.max,10))&&(a.parentNode.parentNode.classList.add("calculator__price_red"),a.value="Некорректное значение");var n=a.parentNode.querySelector(".calculator__price-currency");J(parseInt(a.value,10),n,"roubles"),H=F(e,t)},M=function(l){_.classList.remove("calculator__offer_active"),f.classList.remove("calculator__request_active"),a.querySelector(".calculator__message_mortgage").classList.remove("calculator__message_active"),a.querySelector(".calculator__message_car").classList.remove("calculator__message_active");for(var u=0;u<i.length;u++)i[u].classList.remove("calculator__credit_active"),i[u].classList.remove("in");var s=l.getAttribute("href").slice(1);e=document.getElementById(s),t=s,e.classList.add("calculator__credit_active"),setTimeout(function(){e.classList.add("in")},150),r.classList.remove("calculator__goal_expanded"),c.classList.remove("calculator__list_expanded"),r.innerHTML=l.innerHTML,o.value=l.innerHTML,_.querySelector(".calculator__offer-text_credit").querySelector("p").innerHTML=l.dataset.sumcredit,n.classList.add("calculator__select_active"),_.classList.add("calculator__offer_active"),H=F(e,t)},z=function(a){var r=Number(a.value)/100,n=D(a.parentNode.parentNode.parentNode.querySelector(".calculator__price-wrapper").querySelector("input").value),c=a.parentNode.parentNode.querySelector(".calculator__price_initial").querySelector("input");c.value=j(parseInt(n*r,10)),a.parentNode.querySelector(".calculator__initial-percent").querySelector("p").innerHTML=a.value+"%";var o=c.parentNode.querySelector(".calculator__price-currency");J(parseInt(D(c.value),10),o,"roubles"),H=F(e,t)},A=function(a){var r=a.parentNode.parentNode.querySelector(".calculator__price_term").querySelector("input");r.value=a.value;var n=r.parentNode.querySelector(".calculator__price-years");J(parseInt(r.value,10),n,"years"),H=F(e,t)},x=function(a){var r=parseInt(a.parentNode.parentNode.parentNode.querySelector(".calculator__term-range").querySelector("input").min,10),n=parseInt(a.parentNode.parentNode.parentNode.querySelector(".calculator__term-range").querySelector("input").max,10);parseInt(a.value,10)<r&&(a.value=r),parseInt(a.value,10)>n&&(a.value=n);var c=a.parentNode.querySelector(".calculator__price-years");J(parseInt(a.value,10),c,"years"),H=F(e,t)},j=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},D=function(e){for(var t=e.split(""),a=0;a<t.length;a++)" "===t[a]&&t.splice(a,1);return t.join("")},F=function(e,t){var r=document.querySelector(".calculator__offer-sum"),n=document.querySelector(".calculator__offer-month"),c=document.querySelector(".calculator__offer-percent"),o=document.querySelector(".calculator__offer-salary"),l=parseInt(D(e.querySelector(".calculator__price_range").querySelector("input").value),10);if(e.querySelector(".calculator__price_initial"))var i=parseInt(D(e.querySelector(".calculator__price_initial").querySelector("input").value),10);var u=parseInt(e.querySelector(".calculator__price_term").querySelector("input").value,10);_.classList.remove("calculator__offer_active"),f.classList.remove("calculator__request_active"),a.querySelector(".calculator__message_mortgage").classList.remove("calculator__message_active"),a.querySelector(".calculator__message_car").classList.remove("calculator__message_active");var s={},d=window.calculateCreditParams.calculateSumCredit(l,i,t);s.sumCredit=d.sumCredit,s.percentage=d.percentage;var m=!1;switch(t){case"mortgage":s.sumCredit>=5e5&&(m=!0);break;case"car":s.sumCredit>=2e5&&(m=!0);break;case"consumer":m=!0;break;default:m=!1}if(!m)switch(t){case"mortgage":a.querySelector(".calculator__message_mortgage").classList.add("calculator__message_active");break;case"car":a.querySelector(".calculator__message_car").classList.add("calculator__message_active")}return s.payCredit=window.calculateCreditParams.calculatePayCredit(s.percentage,s.sumCredit,u),s.salary=window.calculateCreditParams.calculateSalary(s.payCredit),s.payCreditField=n,s.sumCreditField=r,s.percentageField=c,s.salaryField=o,m&&(window.viewCalc.renderCalcOffer(s),J(s.payCredit,n.parentNode.querySelector(".calculator__offer-currency"),"roubles"),J(s.sumCredit,r.parentNode.querySelector(".calculator__offer-currency"),"roubles"),J(s.salary,o.parentNode.querySelector(".calculator__offer-currency"),"roubles"),_.classList.add("calculator__offer_active")),{goal:e.dataset.type,priceName:e.dataset.pricename,creditType:t,price:l,initial:i,term:u}},J=function(e,t,a){var r,n=e%100;switch(e%10){case 1:11!==n&&(r="a"),11===n&&(r="c");break;case 2:case 3:case 4:12!==n&&13!==n&&14!==n&&(r="b"),12!==n&&13!==n&&14!==n||(r="c");break;default:r="c"}switch(a){case"roubles":t.innerHTML={a:"рубль",b:"рубля",c:"рублей"}[r];break;case"years":t.innerHTML={a:"год",b:"года",c:"лет"}[r]}};r.addEventListener("click",function(e){e.preventDefault(),r.classList.toggle("calculator__goal_expanded"),c.classList.toggle("calculator__list_expanded")});for(var R=0;R<l.length;R++)l[R].addEventListener("click",function(e){e.preventDefault(),M(e.target)});for(var V=0;V<u.length;V++)u[V].addEventListener("click",function(a){var r,n;a.preventDefault(),r=a.target,n=r.parentNode.querySelector("input"),parseInt(Number(D(n.value))+Number(r.dataset.add),10)<n.dataset.min||parseInt(Number(D(n.value))+Number(r.dataset.add),10)>n.dataset.max||n.parentNode.parentNode.classList.contains("calculator__price_red")||(n.value=j(parseInt(Number(D(n.value))+Number(r.dataset.add),10)),P(n),H=F(e,t)),n.parentNode.parentNode.classList.contains("calculator__price_red")&&(n.parentNode.parentNode.classList.remove("calculator__price_red"),n.value=j((n.dataset.max-n.dataset.min)/2),P(n),H=F(e,t))});for(var W=0;W<N.length;W++)N[W].addEventListener("input",function(e){z(e.target)});for(var G=0;G<w.length;G++)w[G].addEventListener("input",function(e){A(e.target)});for(var K=0;K<L.length;K++)L[K].addEventListener("input",function(e){P(e.target)}),L[K].addEventListener("change",function(e){T(e.target)}),L[K].addEventListener("focus",function(a){var r;(r=a.target).value=D(r.value),r.parentNode.parentNode.classList.contains("calculator__price_red")&&(r.parentNode.parentNode.classList.remove("calculator__price_red"),r.value=(r.dataset.max-r.dataset.min)/2,P(r),H=F(e,t))}),L[K].addEventListener("blur",function(e){e.target.value=j(e.target.value)});for(var Q=0;Q<h.length;Q++)h[Q].addEventListener("change",function(a){var r,n,c,o,l,i;r=a.target,n=parseInt(r.parentNode.parentNode.parentNode.querySelector(".calculator__initial-range").querySelector("input").min,10),c=parseInt(r.parentNode.parentNode.parentNode.querySelector(".calculator__initial-range").querySelector("input").max,10),o=parseInt(D(r.parentNode.parentNode.parentNode.parentNode.querySelector(".calculator__price_range").querySelector("input").value),10),parseInt(r.value,10)<parseInt(o*n/100,10)&&(r.value=parseInt(o*n/100,10)),parseInt(r.value,10)>parseInt(o*c/100,10)&&(r.value=parseInt(o*c/100,10)),l=a.target,i=l.parentNode.querySelector(".calculator__price-currency"),J(parseInt(D(l.value),10),i,"roubles"),H=F(e,t)}),h[Q].addEventListener("focus",function(e){e.target.value=D(e.target.value)}),h[Q].addEventListener("blur",function(e){e.target.value=j(e.target.value)});for(var U=0;U<b.length;U++)b[U].addEventListener("change",function(e){x(e.target)});for(var X=0;X<k.length;X++)k[X].addEventListener("change",function(){H=F(e,t)});v.addEventListener("click",function(e){e.preventDefault();var t=B(),r=t.toString().length,n="";if(r<4)for(var c=4-r;0!==c;)n+="0",c--;n+=t.toString(),f.classList.add("calculator__request_active"),H.requestNumber=n,window.viewCalc.renderFormalizationRequest(H),J(H.price,document.getElementById("request-price").parentNode.querySelector(".calculator__request-currency"),"roubles"),H.initial&&J(H.initial,document.getElementById("request-initial").parentNode.querySelector(".calculator__request-currency"),"roubles"),J(H.term,document.getElementById("request-term").parentNode.querySelector(".calculator__request-years"),"years"),window.scrollTo({top:a.offsetTop+f.offsetTop,left:0,behavior:"smooth"})}),q.addEventListener("submit",function(e){e.preventDefault(),S=!0,B(),f.classList.remove("calculator__request_active"),_.classList.remove("calculator__offer_active"),S=!1;var t={name:document.getElementById("request-name").value,email:document.getElementById("request-email").value,tel:document.getElementById("request-tel").value};if(0===C.length&&I.getItem("requests"))for(var a=0;a<JSON.parse(I.getItem("requests")).length;a++)C.push(JSON.parse(I.getItem("requests"))[a]);C.push(t),I.setItem("requests",JSON.stringify(C))})}(),ymaps.ready(function(){var e=document.getElementById("offices-russia"),t=document.getElementById("offices-sng"),a=document.getElementById("offices-europe"),r=new ymaps.Map("map",{center:[56.895667,60.552225],zoom:5.4},{searchControlProvider:"yandex#search"}),n=new ymaps.Placemark([59.939847,30.360286],{hintContent:"Собственный значок метки",balloonContent:"ул. Восстания, 28",country:"russia"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),c=new ymaps.Placemark([55.762502,37.644414],{hintContent:"Собственный значок метки с контентом",balloonContent:"Москва, Чистопрудный бульвар, 11с2",country:"russia"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),o=new ymaps.Placemark([51.53573,46.032415],{hintContent:"Собственный значок метки с контентом",balloonContent:"Саратов, ул. имени А.М. Горького, 57",country:"russia"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),l=new ymaps.Placemark([58.593955,49.659345],{hintContent:"Собственный значок метки с контентом",balloonContent:"Вятка, ул. Воровского, 75А",country:"russia"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),i=new ymaps.Placemark([57.154068,65.538855],{hintContent:"Собственный значок метки с контентом",balloonContent:"Тюмень, ул. Республики, 45",country:"russia"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),u=new ymaps.Placemark([54.994011,73.373045],{hintContent:"Собственный значок метки с контентом",balloonContent:"Омск, ул. Герцена, 18",country:"russia"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),s=new ymaps.Placemark([40.382056,49.84827],{hintContent:"Собственный значок метки с контентом",balloonContent:"Баку, ул. Шамиля Азизбекова, 211",country:"CIS"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),d=new ymaps.Placemark([43.242384,76.940417],{hintContent:"Собственный значок метки с контентом",balloonContent:"Алматы, проспект Абая, 51",country:"CIS"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),m=new ymaps.Placemark([41.308374,69.270771],{hintContent:"Собственный значок метки с контентом",balloonContent:"Ташкент, ул. Ислама Каримова, 15",country:"CIS"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),p=new ymaps.Placemark([53.902236,27.549848],{hintContent:"Собственный значок метки с контентом",balloonContent:"Минск, ул. Немига, 5",country:"CIS"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),g=new ymaps.Placemark([51.500926,-.107995],{hintContent:"Собственный значок метки с контентом",balloonContent:"London, Waterloo Road, 157",country:"europe"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),_=new ymaps.Placemark([41.910252,12.49721],{hintContent:"Собственный значок метки с контентом",balloonContent:"Rome, Via Sicilia, 184",country:"europe"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),v=new ymaps.Placemark([50.084299,14.427518],{hintContent:"Собственный значок метки с контентом",balloonContent:"Prague, Panská, 890/7",country:"europe"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),f=new ymaps.Placemark([48.877903,2.351655],{hintContent:"Собственный значок метки с контентом",balloonContent:"Paris, Rue la Fayette",country:"europe"},{iconLayout:"default#image",iconImageHref:"img/location.svg",iconImageSize:[35,40],iconImageOffset:[-18,-40]}),y=new ymaps.GeoObjectCollection;y.add(n),y.add(c),y.add(o),y.add(l),y.add(u),y.add(i);var S=new ymaps.GeoObjectCollection;S.add(p),S.add(s),S.add(m),S.add(d);var q=new ymaps.GeoObjectCollection;q.add(g),q.add(f),q.add(v),q.add(_),r.geoObjects.add(y),r.geoObjects.add(q),r.geoObjects.add(S),e.checked||r.geoObjects.remove(y),t.checked||r.geoObjects.remove(S),a.checked||r.geoObjects.remove(q),e.addEventListener("change",function(e){I(e.target,r,y)}),t.addEventListener("change",function(e){I(e.target,r,S)}),a.addEventListener("change",function(e){I(e.target,r,q)});var I=function(e,t,a){e.checked&&t.geoObjects.add(a),e.checked||t.geoObjects.remove(a)}}),function(){var e=document.querySelector("#calculator-form"),t=document.querySelector(".popup-container"),a=document.querySelectorAll(".popup__close"),r=document.querySelector(".popup__thanks"),n=document.querySelector(".header__login"),c=document.querySelector(".popup__login"),o=document.getElementById("login"),l=document.getElementById("password"),i=document.getElementById("show-password"),u=document.querySelector("#popup-form"),s=localStorage,d=[];n.addEventListener("click",function(e){e.preventDefault(),t.classList.add("popup-container_active"),c.classList.add("popup__login_active"),document.querySelector("body").classList.add("body-hidden"),o.focus()}),i.addEventListener("change",function(e){e.target.checked&&(l.type="text"),e.target.checked||(l.type="password")}),u.addEventListener("submit",function(e){e.preventDefault();var t=!1,a=o.value,r=document.getElementById("password").value;if(s.getItem("passwords")&&p(JSON.parse(s.getItem("passwords")),a,r)&&(t=!0),!s.getItem("passwords")&&p(d,a,r)&&(t=!0),!t&&""!==a&&""!==r){var n={login:a,password:r};if(0===d.length&&s.getItem("passwords"))for(var c=0;c<JSON.parse(s.getItem("passwords")).length;c++)d.push(JSON.parse(s.getItem("passwords"))[c]);d.push(n),s.setItem("passwords",JSON.stringify(d))}g()}),e.addEventListener("submit",function(e){e.preventDefault(),t.classList.add("popup-container_active"),r.classList.add("popup__thanks_active"),document.querySelector("body").classList.add("body-hidden");for(var a=e.target.querySelectorAll("input"),n=0;n<a.length;n++)"submit"!==a[n].type&&(a[n].value="")});for(var m=0;m<a.length;m++)a[m].addEventListener("click",function(){g()});var p=function(e,t,a){for(var r=0;r<e.length;r++)if(e[r].login===t&&e[r].password===a)return!0;return!1};document.addEventListener("keydown",function(e){t.classList.contains("popup-container_active")&&"Escape"===e.code&&g()}),t.addEventListener("click",function(e){e.target===t&&g()});var g=function(){t.classList.remove("popup-container_active"),c.classList.remove("popup__login_active"),r.classList.remove("popup__thanks_active"),document.querySelector("body").classList.remove("body-hidden"),l.value="",o.value="",i.checked=!1,l.type="password"}}(),function(){new Swiper(".slider__container",{init:!1,direction:"horizontal",loop:!0,slidesPerView:1,pagination:{el:".slider__pagination",clickable:!0},autoplay:{delay:4e3,disableOnInteraction:!1}}).init();var e,t=!1,a=document.querySelectorAll(".tabs__panel");document.addEventListener("DOMContentLoaded",function(){if(window.innerWidth<1200&&!t){for(var r=0;r<a.length;r++)a[r].classList.add("swiper-slide");e=new Swiper(".tabs__container",{direction:"horizontal",loop:!0,slidesPerView:1,pagination:{el:".tabs__pagination",clickable:!0,type:"bullets"}}),t=!0}}),window.addEventListener("resize",function(){if(window.innerWidth<1200&&!t){for(var r=0;r<a.length;r++)a[r].classList.add("swiper-slide");e=new Swiper(".tabs__container",{direction:"horizontal",loop:!0,slidesPerView:1,pagination:{el:".tabs__pagination",clickable:!0,type:"bullets"}}),t=!0}if(window.innerWidth>=1200&&t){e.destroy(!1);for(var n=0;n<a.length;n++)a[n].classList.remove("swiper-slide");t=!1}})}(),function(){for(var e=document.querySelectorAll(".tabs__link"),t=document.querySelectorAll(".tabs__item"),a=document.querySelectorAll(".anchor-link"),r=document.querySelectorAll(".tabs__panel"),n=0;n<e.length;n++)e[n].addEventListener("click",function(e){e.preventDefault();for(var a=document.querySelector(e.target.getAttribute("href")),n=0;n<r.length;n++)r[n].classList.remove("tabs__panel_active"),r[n].classList.remove("in");a.classList.add("tabs__panel_active"),setTimeout(function(){a.classList.add("in")},150);for(var c=0;c<t.length;c++)t[c].classList.remove("tabs__item_active");e.target.parentNode.classList.add("tabs__item_active")});for(var c=0;c<a.length;c++)a[c].addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:document.querySelector(e.target.getAttribute("href")).offsetTop,left:0,behavior:"smooth"})})}(),function(){window.viewCalc={renderCalcOffer:function(e){e.payCreditField.innerHTML=e.payCredit,e.sumCreditField.innerHTML=e.sumCredit,e.percentageField.innerHTML=e.percentage,e.salaryField.innerHTML=e.salary},renderFormalizationRequest:function(e){document.getElementById("request-initial").innerHTML="",document.getElementById("request-initial").parentNode.querySelector(".calculator__request-currency").innerHTML="",document.getElementById("request-goal").innerHTML=e.goal,document.getElementById("request-number").innerHTML=e.requestNumber,document.getElementById("request-price").parentNode.parentNode.querySelector(".calculator__descr").innerHTML=e.priceName,document.getElementById("request-price").innerHTML=e.price,document.getElementById("request-term").innerHTML=e.term,e.initial&&(document.getElementById("request-initial").innerHTML=e.initial)}}}();